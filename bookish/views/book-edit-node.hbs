<div class="editor-node-body">
{{! Renders a single node in the book editor tree}}
{{! Includes drop zones and supports nodes that point to content (with ids) and containers (chapter/unit)}}
{{! The div above MUST be here and MUST NOT have any spaces before it because the 'li' parent will render differently}}

{{#if parent}}
  <div class="editor-drop-zone editor-drop-zone-before editor-node-before"></div>
{{else}}
  <div class="editor-drop-zone-before editor-node-before"></div>
{{/if}}

{{#if children}}
  {{#if expanded}}
    <span class="editor-expand-collapse" title="Click to collapse"><i class="icon-minus-sign"></i></span>
  {{else}}
    <span class="editor-expand-collapse" title="Click to expand"><i class="icon-plus-sign"></i></span>
  {{/if}}
{{/if}}

<button class="btn btn-mini pull-right edit-settings" title="Advanced Settings"><i class="icon-pencil"></i></button>
{{#if editAction}}
  <span data-media-type="{{#if content}}{{content.mediaType}}{{else}}{{mediaType}}{{/if}}" data-content-id="{{id}}" data-content-title="{{content.title}}" class="editor-drop-zone editor-drop-zone-in edit-action"><i class="icon-content"></i>
    {{! A book title (if set) overrides the module title}}
    {{#if title}}
      <span class="editor-node-title editor-node-title">{{title}}</span>
    {{else}}
      {{#if content}}
        <span class="editor-node-title editor-node-title autogenerated-text">{{content.title}}</span>
      {{else}}
        <span class="editor-node-title editor-node-title autogenerated-text">BUG:NO_TITLE_SET</span>
      {{/if}}
    {{/if}}
  </span>
{{else}}
  <span data-media-type="{{mediaType}}" data-content-title="{{title}}" class="organization-node editor-expand-collapse editor-drop-zone editor-drop-zone-in">
    {{! For Book Chapter nodes don't try to render an icon FIXME: hide it in the CSS instead. }}
    {{#if id}}
      <i class="icon-content"></i>
    {{/if}}
    <span class="editor-node-title">{{title}}</span>
  </span>
{{/if}}

{{#if parent}}
  <div class="editor-drop-zone editor-drop-zone-after editor-node-after"></div>
{{else}}
  <div class="editor-node-after"></div>
{{/if}}

</div>

{{! Keep outside the main div so hover of buttons that float on the right work}}
{{#if children}}
  <ol>
  </ol>
{{/if}}

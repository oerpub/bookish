<div class="editor-node-body editor-drop-zone editor-drop-zone-in">
{{! Renders a single node in the book editor tree}}
{{! Includes drop zones and supports nodes that point to content (with ids) and containers (chapter/unit)}}
{{! The div above MUST be here and MUST NOT have any spaces before it because the 'li' parent will render differently}}

{{#if hasChildren}}
  <span class="editor-expand-collapse" title="Click to expand/collapse"><i class="icon-content"></i></span>
{{/if}}

<button class="btn btn-mini pull-right edit-settings" title="Edit Title"><i class="icon-pencil"></i></button>
{{#if editAction}}
  <span data-media-type="{{#if content}}{{content.mediaType}}{{else}}{{mediaType}}{{/if}}" data-content-id="{{id}}" data-content-title="{{content.title}}" class="edit-action"><i class="icon-content"></i>
    {{! A book title (if set) overrides the module title}}
    {{#if title}}
      <span class="editor-node-title">{{title}}</span>
    {{else}}
      {{#if content}}
        <span class="editor-node-title autogenerated-text">{{content.title}}</span>
      {{else}}
        <span class="editor-node-title autogenerated-text">BUG:NO_TITLE_SET</span>
      {{/if}}
    {{/if}}
  </span>
{{else}}
  <span class="go-edit" data-media-type="{{mediaType}}" data-content-title="{{title}}" class="no-edit-action editor-drop-zone editor-drop-zone-in"><i class="icon-content"></i>
    <span class="editor-node-title">
      <span {{#unless hasChildren}}class="btn-link"{{/unless}}>
        <!-- If the content does not have a title (like an image) or it has not been looked up yet use the path -->
        {{#if title}}
          {{{title}}}
        {{else}}
          {{id}}
        {{/if}}
      </span>
    </span>
  </span>
{{/if}}

</div>

{{#if hasParent}}
  {{#if hasChildren}}
  {{else}}
    <div class="editor-drop-zone editor-drop-zone-after editor-node-after"></div>
  {{/if}}
{{else}}
  <div class="editor-node-after"></div>
{{/if}}

{{! Always include the list because a node _may_ get children later}}
<ol></ol>

{{#if hasParent}}
  {{#if hasChildren}}
    <div class="editor-drop-zone editor-drop-zone-after editor-node-after"></div>
  {{/if}}
{{/if}}
